@inject NavigationManager Nav
@code {
    [Parameter] public Exception? Exception { get; set; }

    protected override void OnInitialized()
    {
        // 認証切れの場合はログインページへ
        if (Exception is UnauthorizedAccessException)
        {
            Nav.NavigateTo("/login?expired=1", true); // trueで強制リロード
        }
    }
}

@if (Exception is UnauthorizedAccessException)
{
    <div>認証の有効期限が切れました。再度ログインしてください。</div>
}
else
{
    @* 本来はここでエラーログ出力など *@
    <div class="alert alert-danger">
        <strong>予期しないエラーが発生しました。</strong>
        <br />
        @System.Web.HttpUtility.HtmlEncode(Exception?.Message)
        <br />
        <button class="btn btn-primary mt-2" @onclick="() => Nav.NavigateTo(Nav.Uri, true)">再試行</button>
    </div>
}
